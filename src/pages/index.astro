---
// PAGE A : TABLEAU DE BORD
// Hero section avec identit√© et statut administratif
// Section "Prochaines √âch√©ances" et "Alertes de Suivi"

import MainLayout from '../layouts/MainLayout.astro';

// Props pour le layout
const pageTitle = 'Tableau de Bord';
const showHero = true;
const heroTitle = 'Portail de Documentation Clinique';
const heroDescription = 'Tableau de bord centralis√© pour le suivi m√©dical et administratif';
const breadcrumbs = [
  { label: 'Tableau de Bord' }
];

// Donn√©es factices pour les placeholders
const upcomingAppointments = [
  { date: '15/02/2026', time: '10:30', type: 'Consultation Psychiatrique', location: 'CMP Villeneuve-sur-Lot', specialist: 'Dr. Dubois' },
  { date: '22/02/2026', time: '15:00', type: 'Suivi AAH', location: 'MDPH 47', specialist: 'Conseiller MDPH' },
  { date: '01/03/2026', time: '14:00', type: 'Bilan Biologique', location: 'Laboratoire d\'Analyses', specialist: 'Pr√©l√®vement sanguin' }
];

const biologicalAlerts = [
  { parameter: 'Transaminases', value: '45 U/L', normalRange: '5-40 U/L', status: '√âlev√©', severity: 'mod√©r√©', lastCheck: '15/02/2026' },
  { parameter: 'GGT (Gamma-GT)', value: '32 U/L', normalRange: '8-61 U/L', status: 'Normal', severity: 'aucun', lastCheck: '15/02/2026' },
  { parameter: 'Bilirubine', value: '8 ¬µmol/L', normalRange: '3-20 ¬µmol/L', status: 'Normal', severity: 'aucun', lastCheck: '15/02/2026' }
];

const administrativeStatus = {
  aah: { status: 'Actif', since: '15/11/2024', renewal: '10/2026' },
  rqth: { status: 'En cours', submission: '15/01/2026', decision: 'En attente' },
  housing: { status: 'Dossier HLM d√©pos√©', contact: 'N√©g√¢r Rezai Aria', date: '10/01/2026' }
};
---

<MainLayout 
  title={pageTitle} 
  showHero={showHero}
  heroTitle={heroTitle}
  heroDescription={heroDescription}
  breadcrumbs={breadcrumbs}
>
  <!-- Section : Identit√© et Statut Administratif -->
  <section class="identity-section card">
    <h2>Identit√© et Statut Administratif</h2>
    
    <div class="grid grid-3">
      <!-- Bloc Identit√© -->
      <div class="card">
        <h3 class="card-title">Identit√©</h3>
        <div class="identity-details">
          <p><strong>Nom :</strong> HAUGUEL</p>
          <p><strong>Pr√©nom :</strong> Fr√©d√©ric</p>
          <p><strong>Date de naissance :</strong> [CONTENU √Ä REMPLIR - DATE DE NAISSANCE]</p>
          <p><strong>N¬∞ S√©curit√© Sociale :</strong> [CONTENU √Ä REMPLIR - NUM√âRO]</p>
        </div>
      </div>

      <!-- Bloc AAH -->
      <div class="card">
        <h3 class="card-title">Allocation Adulte Handicap√© (AAH)</h3>
        <div class="status-details">
          <p><strong>Statut :</strong> <span class="badge badge-success">{administrativeStatus.aah.status}</span></p>
          <p><strong>B√©n√©ficiaire depuis :</strong> {administrativeStatus.aah.since}</p>
          <p><strong>Prochain renouvellement :</strong> {administrativeStatus.aah.renewal}</p>
          <p><strong>Taux d'incapacit√© :</strong> [CONTENU √Ä REMPLIR - TAUX]</p>
        </div>
      </div>

      <!-- Bloc RQTH -->
      <div class="card">
        <h3 class="card-title">Reconnaissance de la Qualit√© de Travailleur Handicap√© (RQTH)</h3>
        <div class="status-details">
          <p><strong>Statut :</strong> <span class="badge badge-warning">{administrativeStatus.rqth.status}</span></p>
          <p><strong>D√©p√¥t du dossier :</strong> {administrativeStatus.rqth.submission}</p>
          <p><strong>D√©cision attendue :</strong> {administrativeStatus.rqth.decision}</p>
          <p><strong>CDAPH r√©f√©rente :</strong> [CONTENU √Ä REMPLIR - CDAPH]</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section : Prochaines √âch√©ances -->
  <section class="appointments-section card">
    <h2>Prochaines √âch√©ances</h2>
    
    <div class="appointments-grid">
      {upcomingAppointments.map((appointment, index) => (
        <div class={`appointment-card ${index === 0 ? 'next-appointment' : ''}`}>
          <div class="appointment-date">
            <span class="date-day">{appointment.date.split('/')[0]}</span>
            <span class="date-month">{appointment.date.split('/')[1]}</span>
          </div>
          <div class="appointment-details">
            <h3>{appointment.type}</h3>
            <p><strong>Heure :</strong> {appointment.time}</p>
            <p><strong>Lieu :</strong> {appointment.location}</p>
            <p><strong>Sp√©cialiste :</strong> {appointment.specialist}</p>
          </div>
        </div>
      ))}
    </div>
    
    <div class="section-note">
      <p><em>[CONTENU √Ä REMPLIR - NOTES COMPL√âMENTAIRES SUR LES PROCHAINS RDV]</em></p>
    </div>
  </section>

  <!-- Section : Alertes de Suivi Biologique -->
  <section class="alerts-section card">
    <h2>Alertes de Suivi Biologique</h2>
    
    <div class="alerts-grid">
      {biologicalAlerts.map((alert) => (
        <div class={`alert-card alert-${alert.severity === 'mod√©r√©' ? 'warning' : 'success'}`}>
          <div class="alert-header">
            <h3>{alert.parameter}</h3>
            <span class={`badge ${alert.severity === 'mod√©r√©' ? 'badge-warning' : 'badge-success'}`}>
              {alert.status}
            </span>
          </div>
          <div class="alert-details">
            <p><strong>Valeur :</strong> {alert.value} (Normale : {alert.normalRange})</p>
            <p><strong>Dernier contr√¥le :</strong> {alert.lastCheck}</p>
            <p><strong>S√©v√©rit√© :</strong> {alert.severity}</p>
          </div>
        </div>
      ))}
    </div>
    
    <div class="section-note">
      <p><em>[CONTENU √Ä REMPLIR - INTERPR√âTATION CLINIQUE ET RECOMMANDATIONS]</em></p>
    </div>
  </section>

  <!-- Section : Acc√®s Rapide -->
  <section class="quick-access-section card">
    <h2>Acc√®s Rapide aux Sections</h2>
    
    <div class="grid grid-3">
      <a href="/dossier-clinique-astro/clinique" class="quick-access-card">
        <div class="card-icon">üè•</div>
        <h3>Profil Clinique</h3>
        <p>Diagnostics, pharmacop√©e et auto-√©valuations</p>
      </a>
      
      <a href="/dossier-clinique-astro/parcours" class="quick-access-card">
        <div class="card-icon">üìÖ</div>
        <h3>Anamn√®se Chronologique</h3>
        <p>Historique m√©dical et parcours de vie</p>
      </a>
      
      <a href="/dossier-clinique-astro/social" class="quick-access-card">
        <div class="card-icon">üè†</div>
        <h3>R√©alit√© Sociale</h3>
        <p>Logement, ressources et engagement</p>
      </a>
    </div>
  </section>

  <!-- Styles sp√©cifiques √† la page -->
  <style>
    /* ----------------------------------------------------------------------
       SECTION IDENTIT√â
       ---------------------------------------------------------------------- */
    .identity-section .grid-3 {
      gap: var(--spacing-lg);
    }

    .identity-details p,
    .status-details p {
      margin-bottom: var(--spacing-sm);
      padding-bottom: var(--spacing-xs);
      border-bottom: 1px solid var(--color-gray-100);
    }

    .identity-details p:last-child,
    .status-details p:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    /* ----------------------------------------------------------------------
       PROCHAINES √âCH√âANCES
       ---------------------------------------------------------------------- */
    .appointments-grid {
      display: grid;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }

    .appointment-card {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: var(--spacing-md);
      padding: var(--spacing-md);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-md);
      background-color: var(--color-white);
      transition: all var(--transition-base);
    }

    .appointment-card:hover {
      border-color: var(--color-primary);
      box-shadow: var(--shadow-md);
    }

    .appointment-card.next-appointment {
      border-left: 4px solid var(--color-warning);
      background-color: rgba(255, 193, 7, 0.05);
    }

    .appointment-date {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      background-color: var(--color-primary);
      color: var(--color-white);
      border-radius: var(--border-radius-md);
      font-weight: 600;
    }

    .date-day {
      font-size: 1.5rem;
      line-height: 1;
    }

    .date-month {
      font-size: 0.875rem;
      line-height: 1;
    }

    .appointment-details h3 {
      margin-bottom: var(--spacing-sm);
      color: var(--color-primary);
      border-bottom: none;
    }

    .appointment-details p {
      margin-bottom: var(--spacing-xs);
      font-size: 0.875rem;
    }

    /* ----------------------------------------------------------------------
       ALERTES BIOLOGIQUES
       ---------------------------------------------------------------------- */
    .alerts-grid {
      display: grid;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }

    .alert-card {
      padding: var(--spacing-md);
      border-radius: var(--border-radius-md);
      border-left: 4px solid transparent;
    }

    .alert-warning {
      background-color: rgba(255, 193, 7, 0.1);
      border-left-color: var(--color-warning);
    }

    .alert-success {
      background-color: rgba(40, 167, 69, 0.1);
      border-left-color: var(--color-success);
    }

    .alert-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-sm);
    }

    .alert-header h3 {
      margin-bottom: 0;
      border-bottom: none;
    }

    .alert-details p {
      margin-bottom: var(--spacing-xs);
      font-size: 0.875rem;
    }

    /* ----------------------------------------------------------------------
       ACC√àS RAPIDE
       ---------------------------------------------------------------------- */
    .quick-access-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: var(--spacing-lg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-md);
      background-color: var(--color-white);
      color: var(--color-gray-800);
      text-decoration: none;
      transition: all var(--transition-base);
    }

    .quick-access-card:hover {
      border-color: var(--color-primary);
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }

    .card-icon {
      font-size: 2.5rem;
      margin-bottom: var(--spacing-md);
    }

    .quick-access-card h3 {
      margin-bottom: var(--spacing-sm);
      color: var(--color-primary);
      border-bottom: none;
    }

    .quick-access-card p {
      font-size: 0.875rem;
      color: var(--color-gray-600);
      margin-bottom: 0;
    }

    /* ----------------------------------------------------------------------
       NOTES DE SECTION
       ---------------------------------------------------------------------- */
    .section-note {
      margin-top: var(--spacing-lg);
      padding: var(--spacing-md);
      background-color: var(--color-gray-50);
      border-radius: var(--border-radius-md);
      border-left: 4px solid var(--color-gray-400);
    }

    .section-note p {
      margin-bottom: 0;
      font-style: italic;
      color: var(--color-gray-600);
    }

    /* ----------------------------------------------------------------------
       RESPONSIVE DESIGN
       ---------------------------------------------------------------------- */
    @media (max-width: 768px) {
      .appointment-card {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .appointment-date {
        margin: 0 auto;
      }

      .alert-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-sm);
      }

      .alert-header .badge {
        align-self: flex-start;
      }

      .quick-access-card {
        padding: var(--spacing-md);
      }

      .card-icon {
        font-size: 2rem;
      }
    }

    @media (max-width: 480px) {
      .grid-3 {
        grid-template-columns: 1fr;
      }

      .appointment-card,
      .alert-card,
      .quick-access-card {
        padding: var(--spacing-sm);
      }
    }
  </style>
</MainLayout>